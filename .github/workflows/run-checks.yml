name: Checks

on:
  workflow_call:
    inputs:
      runs-on:
        required: true
        type: string

      node-version:
        required: false
        type: string

jobs:
  checks:
    name: Checks
    timeout-minutes: 30
    runs-on: ${{ inputs.runs-on }}

    steps:
      - name: Checkout And Install
        uses: zaripych/repka-kit/.github/actions/checkout-and-install
        with:
          node-version: ${{ inputs.node-version }}

      - name: Test
        run: pnpm jest --color --maxWorkers=2

      - name: Integration
        run: pnpm jest --integration --color --maxWorkers=2
        env:
          LOG_LEVEL: debug
          TEST_ROOT_DIR: ${{ github.workspace }}/../
